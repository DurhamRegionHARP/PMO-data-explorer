{"version":3,"sources":["details.js"],"names":["$","wb","componentName","selector","$document","doc","isOpen","this","getAttribute","setOpen","setAttribute","className","saveState","call","removeAttribute","replace","summary","trigger","key","indexOf","localStorage","setItem","open","e","on","event","details","init","parentNode","Object","defineProperty","get","set","ready","which","currentTarget","type","namespace","preventDefault","add","jQuery","window"],"mappings":"CAMA,SAAYA,EAAWC,GACvB,aAMA,IAAIC,EAAgB,aACnBC,EAAW,UAEXC,EAAYH,EAAGI,IAmCfC,EAAS,WACR,OAAuC,OAAhCC,KAAKC,aAAc,SAe3BC,EAAU,SAAUH,GACI,kBAAXA,IACNA,EAdA,WACNC,KAAKG,aAAc,OAAQ,QAC3BH,KAAKI,WAAa,QAClBC,EAAUC,KAAMN,OAYTM,KAAMN,MATN,WACPA,KAAKO,gBAAiB,QACtBP,KAAKI,UAAYJ,KAAKI,UAAUI,QAAS,QAAS,IAClDH,EAAUC,KAAMN,OAQRM,KAAMN,OAGdA,KAAKS,QAAQN,aAAc,gBAAiBJ,GAC5CN,EAAGO,MAAOU,QAAS,WAIpBL,EAAY,WACX,IAAIM,EAMJ,IAJ4C,IAAvCX,KAAKI,UAAUQ,QAAS,WAC5BD,EAAM,2BAA6BX,KAAKC,aAAc,OAGlDU,EACJ,IACCE,aAAaC,QAASH,EAAKX,KAAKe,KAAO,OAAS,UAC/C,MAAQC,MAKbnB,EAAUoB,GAAI,kCAA6BrB,EAzEnC,SAAUsB,GAKhB,IACCC,EADGV,EAAUf,EAAG0B,KAAMF,EAAOvB,EAAeC,GAGxCa,IACJU,EAAUV,EAAQY,WAClBC,OAAOC,eAAgBJ,EAAS,OAAQ,CACvCK,IAAKzB,EACL0B,IAAKvB,KAENiB,EAAQV,QAAUA,GACVN,aAAc,gBAAsD,OAAnCgB,EAAQlB,aAAc,SAEzDQ,EAAQR,aAAc,SAC3BQ,EAAQN,aAAc,OAAQ,UAEzBM,EAAQR,aAAc,aAC3BQ,EAAQN,aAAc,WAAY,KAInCT,EAAGgC,MAAOjC,EAAGgB,GAAWd,MAmD3BE,EAAUoB,GAAI,wBAA0BtB,EAAeC,EAAU,SAAUsB,GAC1E,IAECC,EAFGQ,EAAQT,EAAMS,MACjBC,EAAgBV,EAAMU,cAkBvB,OAdQD,GAAmB,IAAVA,IACsC,IAApDC,EAAcxB,UAAUQ,QAAS,eAClB,WAAfM,EAAMW,MAAqBX,EAAMY,YAAcnC,GAG5B,KAAVgC,GAA0B,KAAVA,IAC3BT,EAAMa,iBACNtC,EAAGmC,GAAgBlB,QAAS,WAJ5BS,EAAUS,EAAcP,YAChBN,MAAQI,EAAQJ,MAUlB,IAIRrB,EAAGsC,IAAKpC,GApHR,CAsHKqC,QAAQC,OAAQxC","file":"details.js","sourcesContent":["/**\n * @title WET-BOEW Details/summary polyfill\n * @overview The <details> and <summary> elements allows content to be expanded and collapsed.\n * @license wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html\n * @author @pjackson28\n */\n( function( $, window, wb ) {\n\"use strict\";\n\n/*\n * Variable and function definitions.\n * These are global to the polyfill - meaning that they will be initialized once per page.\n */\nvar componentName = \"wb-details\",\n\tselector = \"summary\",\n\tinitEvent = \"wb-init.\" + componentName,\n\t$document = wb.doc,\n\n\t/**\n\t * @method init\n\t * @param {jQuery Event} event Event that triggered the function call\n\t */\n\tinit = function( event ) {\n\n\t\t// Start initialization\n\t\t// returns DOM object = proceed with init\n\t\t// returns undefined = do not proceed with init (e.g., already initialized)\n\t\tvar summary = wb.init( event, componentName, selector ),\n\t\t\tdetails;\n\n\t\tif ( summary ) {\n\t\t\tdetails = summary.parentNode;\n\t\t\tObject.defineProperty( details, \"open\", {\n\t\t\t\tget: isOpen,\n\t\t\t\tset: setOpen\n\t\t\t} );\n\t\t\tdetails.summary = summary;\n\t\t\tsummary.setAttribute( \"aria-expanded\", ( details.getAttribute( \"open\" ) !== null ) );\n\n\t\t\tif ( !summary.getAttribute( \"role\" ) ) {\n\t\t\t\tsummary.setAttribute( \"role\", \"button\" );\n\t\t\t}\n\t\t\tif ( !summary.getAttribute( \"tabindex\" ) ) {\n\t\t\t\tsummary.setAttribute( \"tabindex\", \"0\" );\n\t\t\t}\n\n\t\t\t// Identify that initialization has completed\n\t\t\twb.ready( $( summary ), componentName );\n\t\t}\n\t},\n\n\tisOpen = function() {\n\t\treturn this.getAttribute( \"open\" ) !== null;\n\t},\n\n\topen = function() {\n\t\tthis.setAttribute( \"open\", \"open\" );\n\t\tthis.className += \" open\";\n\t\tsaveState.call( this );\n\t},\n\n\tclose = function() {\n\t\tthis.removeAttribute( \"open\" );\n\t\tthis.className = this.className.replace( \" open\", \"\" );\n\t\tsaveState.call( this );\n\t},\n\n\tsetOpen = function( isOpen ) {\n\t\tif ( typeof isOpen === \"boolean\" ) {\n\t\t\tif ( isOpen ) {\n\t\t\t\topen.call( this );\n\t\t\t} else {\n\t\t\t\tclose.call( this );\n\t\t\t}\n\t\t}\n\t\tthis.summary.setAttribute( \"aria-expanded\", isOpen );\n\t\t$( this ).trigger( \"toggle\" );\n\t},\n\n\t//TODO: Move to the alerts plugin\n\tsaveState = function() {\n\t\tvar key;\n\n\t\tif ( this.className.indexOf( \"alert\" ) !== -1 ) {\n\t\t\tkey = \"alert-collapsible-state-\" + this.getAttribute( \"id\" );\n\t\t}\n\n\t\tif ( key ) {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem( key, this.open ? \"open\" : \"closed\" );\n\t\t\t} catch ( e ) {}\n\t\t}\n\t};\n\n// Bind the init event of the plugin\n$document.on( \"timerpoke.wb \" + initEvent, selector, init );\n\n// Bind the the event handlers of the plugin\n$document.on( \"click keydown toggle.\" + componentName, selector, function( event ) {\n\tvar which = event.which,\n\t\tcurrentTarget = event.currentTarget,\n\t\tdetails;\n\n\t// Ignore middle/right mouse buttons and wb-toggle enhanced summary elements (except for toggle)\n\tif ( ( !which || which === 1 ) &&\n\t\t( currentTarget.className.indexOf( \"wb-toggle\" ) === -1 ||\n\t\t( event.type === \"toggle\" && event.namespace === componentName ) ) ) {\n\t\tdetails = currentTarget.parentNode;\n\t\tdetails.open = !details.open;\n\t} else if ( which === 13 || which === 32 ) {\n\t\tevent.preventDefault();\n\t\t$( currentTarget ).trigger( \"click\" );\n\t}\n\n\t/*\n\t * Since we are working with events we want to ensure that we are being passive about our control,\n\t * so returning true allows for events to always continue\n\t */\n\treturn true;\n} );\n\n// Add the timer poke to initialize the plugin\nwb.add( selector );\n\n} )( jQuery, window, wb );\n"]}